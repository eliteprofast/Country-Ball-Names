<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Maths Learning Game</title>
    <style>
        body { font-family: Arial, sans-serif; background: #02fdfd; text-align: center; }
        #game-container { background: #c8ff02; padding: 30px; margin: 50px auto; width: 350px; border-radius: 10px; box-shadow: 0 2px 8px #ccc; }
        #question { font-size: 1.5em; margin-bottom: 20px; }
        #result { margin-top: 15px; font-weight: bold; }
        input[type="number"] { font-size: 1em; padding: 5px; width: 80px; }
        button { font-size: 1em; padding: 7px 20px; margin-top: 10px; }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="question"></div>
        <div style="display:flex;gap:10px;justify-content:center;align-items:center;margin-bottom:10px;">
          <input type="number" id="answer" autocomplete="off" style="flex:1;max-width:100px;" placeholder="Your answer" />
        <button id="submitBtn" onclick="submitAnswer()" style="background:#10b981;color:#fff;border:none;border-radius:6px;box-shadow:0 2px 8px #10b98122;transition:background 0.2s;" tabindex="-1">Enter</button>
        <button id="skipBtn" type="button" style="background:#f59e42;color:#fff;border:none;border-radius:6px;box-shadow:0 2px 8px #f59e4222;transition:background 0.2s;">Skip</button>
        </div>
        <div id="result" style="min-height:28px;"></div>
        <div id="coins" style="margin:16px 0 0 0;font-size:1.18em;color:#f59e42;font-weight:bold;display:flex;align-items:center;justify-content:center;gap:0.5em;background:#fffbe6;padding:8px 18px;border-radius:18px;box-shadow:0 2px 8px #f59e4222;max-width:180px;margin-left:auto;margin-right:auto;">
          <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1fa99.png" alt="coin" style="height:1.4em;width:1.4em;vertical-align:middle;"> 
          <span id="coinCount">0</span>
        </div>

    </div>
    <script>
        let num1, num2, operator, correctAnswer;
        let coins = Number(localStorage.getItem('mathCoins') || 0);

        function skipQuestion() {
            document.getElementById('result').textContent = `Skipped! The answer was ${correctAnswer}.`;
            document.getElementById('result').style.color = '#f59e42';
            setTimeout(generateQuestion, 2000);
        }

        // Attach skipQuestion to skipBtn click after DOM is loaded
        window.addEventListener('DOMContentLoaded', function() {
            document.getElementById('skipBtn').addEventListener('click', skipQuestion);
        });

        function randomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function updateCoins() {
            document.getElementById('coinCount').textContent = coins;
            localStorage.setItem('mathCoins', coins);
        }

        function generateQuestion() {
            const ops = ['+', '-', 'x'];
            num1 = randomInt(1, 20);
            num2 = randomInt(1, 20);
            operator = ops[randomInt(0, ops.length - 1)];
            if (operator === '-' && num2 > num1) [num1, num2] = [num2, num1];
            // Use x for display, * for calculation
            let displayOperator = operator === 'x' ? 'Ã—' : operator;
            correctAnswer = operator === 'x' ? num1 * num2 : eval(`${num1} ${operator} ${num2}`);
            document.getElementById('question').textContent = `What is ${num1} ${displayOperator} ${num2}?`;
            document.getElementById('answer').value = '';
            document.getElementById('answer').focus();
            document.getElementById('result').textContent = '';
            updateCoins();
        }

        function submitAnswer() {
            const userAnswer = Number(document.getElementById('answer').value);
            if (userAnswer === correctAnswer) {
                coins++;
                updateCoins();
                animateCoin();
                document.getElementById('result').textContent = 'Correct!';
                document.getElementById('result').style.color = 'green';
            } else {
                document.getElementById('result').textContent = `Wrong! The answer was ${correctAnswer}.`;
                document.getElementById('result').style.color = 'red';
            }
            setTimeout(generateQuestion, 2000);
        }

        document.getElementById('answer').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !document.getElementById('submitBtn').disabled) {
                e.preventDefault();
                submitAnswer();
            } else if ((e.key === 'Escape' || e.key === 'Esc') && !document.getElementById('skipBtn').disabled) {
                e.preventDefault();
                skipQuestion();
            }
        });

        // Focus input on page click for mobile
        document.body.addEventListener('click', function(e) {
          if (e.target.id !== 'answer') {
            document.getElementById('answer').focus();
          }
        });

        // Animate coin on earn
        function animateCoin() {
          const coin = document.getElementById('coinCount');
          coin.style.transform = 'scale(1.3)';
          coin.style.transition = 'transform 0.18s';
          setTimeout(() => {
            coin.style.transform = 'scale(1)';
          }, 180);
        }



        generateQuestion();
    </script>
</body>
</html>